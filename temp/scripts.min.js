"use strict";function formSpree(t){var e=$.Deferred();return $.ajax({url:"https://formspree.io/"+email,method:"POST",data:t,dataType:"json"}).done(function(t){e.resolve("success"),console.log("AJAX success",t)}).fail(function(t,o,n){e.reject("fail"),console.error("AJAX fail",t,o,n)}),e.promise()}function submitContactForm(){var t=isProduction?"":"[TEST] ",e={_subject:t+" Someone is contacting you",_format:"plain",about:"Someone just completed the contact form on "+location.href+"."};isProduction||(e.about="This is test data. Most likely Jan or Hannah is now working on your website :)");var o=["name","email","phone","location","company","industry","message","brochure"];$.each(o,function(t,o){e[o]=userData[o]||"-"}),console.log("Submitting contact form to FormSpree ...",e);var n=$("#contact #form button.submit");n.html("Sending...").prop("disabled",!0),$.when(formSpree(e)).then(function(){console.log("success"),n.html("Sent!")},function(){console.log("fail"),n.html("Whoops, invalid email?").prop("disabled",!1).hover(function(){$(this).html("Try again")},function(){$(this).html("Whoops, invalid email?")})})}function store(t,e){userData[t]=e,console.log(t,e)}var isProduction="www.petasitcheff.com"===location.host,environment=isProduction?"production":"staging",email="peta@petasitcheff.com",userData={};ga&&(ga("create","UA-34474019-10","auto"),ga("set",{dimension1:environment}),ga("send","pageview")),$(document).ready(function(){$("body").addClass(environment),$('a[href*="#"]:not([href="#"])').click(function(){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var t=$(this.hash);if(t=t.length?t:$("[name="+this.hash.slice(1)+"]"),t.length)return $("html, body").animate({scrollTop:t.offset().top},1e3),!1}});var t=!1,e=$("#menu"),o=$("main");$("#menu-burger,.close-menu,#navigation-links>li>a").on("click",function(){t?(e.removeClass("active"),o.removeClass("menu-active"),t=!1,event.preventDefault()):(e.addClass("active"),o.addClass("menu-active"),t=!0,event.preventDefault())});var n=$("#menu-burger").offset().top;$(document).on("scroll",function(){$(window).scrollTop()+$(window).width()/33>n?$("#menu-burger").css({position:"fixed",top:"3vw",left:"3vw",margin:0}):$("#menu-burger").css({position:"static","margin-top":"3vw"})});var i="short",a=$("#story"),s=$("#story>div"),r={duration:1e3,easing:"easeOutExpo"},c=8*$(document).width()/100,l=$("#story #short>div").height()+2*c;$("#story #long>div").height();s.css("height",l),$(window).resize(function(){var t=8*$(document).width()/100,e=$("#story #long>div").height()+2*t,o=$("#story #short>div").height()+2*t;"short"===i?s.css("height",o):s.css("height",e)}),a.find("button").on("click",function(){var t=8*$(document).width()/100,e=$("#story #long>div").height()+2*t,o=$("#story #short>div").height()+2*t;"short"===i?(s.velocity({height:e,translateX:"-100vw"},r),i="long"):(s.velocity({translateX:"0vw"},r),s.velocity({height:o},r),i="short")}),$("#contact #form button.submit").on("click",function(t){t.preventDefault(),submitContactForm()}),$("button.toggle").on("click",function(t){t.preventDefault();var e=$(this).attr("name"),o=userData[e]||!1;store(e,!o),$(this).toggleClass("checked",!o)}),$(document).on("keyup blur change","input, textarea",function(){var t=$(this).attr("name"),e=$(this).val();t&&e?(store(t,e),$(this).addClass("has-value")):$(this).removeClass("has-value")})});